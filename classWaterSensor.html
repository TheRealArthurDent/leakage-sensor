<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Leakage sensor: WaterSensor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Leakage sensor
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classWaterSensor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">WaterSensor Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Gets values from an Iduino SE045 water sensor.  
 <a href="classWaterSensor.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="water-sensor_8hpp_source.html">water-sensor.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a095c0722fedaa459133ea8eb8a8606fd" id="r_a095c0722fedaa459133ea8eb8a8606fd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWaterSensor.html#a095c0722fedaa459133ea8eb8a8606fd">WaterSensor</a> (int sensorPin, int powerPin=-1)</td></tr>
<tr class="memdesc:a095c0722fedaa459133ea8eb8a8606fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:a095c0722fedaa459133ea8eb8a8606fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef71cad86e0fc5541a0aa85cc91c4e1c" id="r_aef71cad86e0fc5541a0aa85cc91c4e1c"><td class="memItemLeft" align="right" valign="top"><a id="aef71cad86e0fc5541a0aa85cc91c4e1c" name="aef71cad86e0fc5541a0aa85cc91c4e1c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>WaterSensor</b> (<a class="el" href="classWaterSensor.html">WaterSensor</a> const &amp;)</td></tr>
<tr class="separator:aef71cad86e0fc5541a0aa85cc91c4e1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf22e7025c6789ce0338ffd89879b881" id="r_adf22e7025c6789ce0338ffd89879b881"><td class="memItemLeft" align="right" valign="top"><a id="adf22e7025c6789ce0338ffd89879b881" name="adf22e7025c6789ce0338ffd89879b881"></a>
<a class="el" href="classWaterSensor.html">WaterSensor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classWaterSensor.html">WaterSensor</a> const &amp;)</td></tr>
<tr class="separator:adf22e7025c6789ce0338ffd89879b881"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a755c16bd398c2a234590bff4ca478b89" id="r_a755c16bd398c2a234590bff4ca478b89"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classWaterSensor.html#a755c16bd398c2a234590bff4ca478b89">getLevel</a> () -&gt; int</td></tr>
<tr class="memdesc:a755c16bd398c2a234590bff4ca478b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measures and returns the current water level.  <br /></td></tr>
<tr class="separator:a755c16bd398c2a234590bff4ca478b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Gets values from an Iduino SE045 water sensor. </p>
<p>This class is meant to operate an Iduino SE045 water sensor and perform measurements via this sensor. It is designed to also control the power supply of the sensor via a GPIO port, but can also operate an always-on sensor. Since the sensor is designed to be operated with 5V but the NodeMCU does only deliver 3,3V, the read values will never reach 1024 (100%). However that doesn't really matter, since you have to somewhat calibrate it anyway. The sensor needs some time from being powered-up until it delivers meaningful values which is why I ran some tests to </p><ul>
<li>find a suitable up-time at which the measurements are reliable and </li>
<li>calibrate the sensor (find the respective raw values measured at this point given a certain exposure to moist)</li>
</ul>
<p>The results of this calibration are added to the repository as a spread sheet at docs/Calibration.ods. The following image shows the calibration results. </p><div class="image">
<img src="water-sensor-calibration.png" alt=""/>
</div>
<p> Following this result, the power-up time before a measurement is defined at 100 ms. This also means that a <a class="el" href="classWaterSensor.html" title="Gets values from an Iduino SE045 water sensor.">WaterSensor</a> configured to be powered up on demand, consumes 100 ms per measurement. To circumvent this, the sensor can be operated always-on. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classWaterSensor.html#a095c0722fedaa459133ea8eb8a8606fd" title="Constructor.">WaterSensor(int, int)</a>. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a095c0722fedaa459133ea8eb8a8606fd" name="a095c0722fedaa459133ea8eb8a8606fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a095c0722fedaa459133ea8eb8a8606fd">&#9670;&#160;</a></span>WaterSensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WaterSensor::WaterSensor </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sensorPin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>powerPin</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensorPin</td><td>The GPIO pin that the sensor is connected to. Of course this should be an analog GPIO pin. </td></tr>
    <tr><td class="paramname">powerPin</td><td>[OPTIONAL] The GPIO pin that controls the power of the sensor. It is highly recommended to control the power supply of your sensor, as it will wear quicker when constantly powered. In case you don't have a free GPIO port available, you can still go with constant power and omit this value. If a powerPin is specified, the controller will power the sensor on demand (when ever getLevel is called). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a755c16bd398c2a234590bff4ca478b89" name="a755c16bd398c2a234590bff4ca478b89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a755c16bd398c2a234590bff4ca478b89">&#9670;&#160;</a></span>getLevel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int WaterSensor::getLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; int</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Measures and returns the current water level. </p>
<p>In case a powerPin has been specified, the method will return a value after ~100 ms, as this is the time the sensor will be powered up, before performing the analog read. If the sample rate you are looking for requires a lower value, you might wanna NOT specify a powerPin and power your sensor constantly. In the latter case, the method will return a value (almost) immediately.</p>
<dl class="section return"><dt>Returns</dt><dd>The current water level. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="water-sensor_8hpp_source.html">water-sensor.hpp</a></li>
<li>src/<b>water-sensor.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
